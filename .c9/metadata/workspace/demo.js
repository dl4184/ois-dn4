{"filter":false,"title":"demo.js","tooltip":"/demo.js","undoManager":{"mark":90,"position":90,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":4,"column":25},"action":"insert","lines":["","var baseUrl = 'https://rest.ehrscape.com/rest/v1';","var queryUrl = baseUrl + '/query';","var username = \"ois.seminar\";","var password = \"ois4fri\";"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":25},"end":{"row":5,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":0},"end":{"row":13,"column":1},"action":"insert","lines":["function getSessionId() {","var response = $.ajax({","type: \"POST\",","url: baseUrl + \"/session?username=\" + encodeURIComponent(username) +","\"&password=\" + encodeURIComponent(password),","async: false","});","return response.responseJSON.sessionId;","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":25},"end":{"row":5,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"insert","lines":["    "]},{"start":{"row":8,"column":0},"end":{"row":8,"column":4},"action":"insert","lines":["    "]},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]},{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"insert","lines":["    "]},{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "]},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":4},"end":{"row":25,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":0},"end":{"row":26,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":0},"end":{"row":68,"column":1},"action":"insert","lines":["function kreirajEHRzaBolnika() {","sessionId = getSessionId();","var ime = $(\"#kreirajIme\").val();","var priimek = $(\"#kreirajPriimek\").val();","var datumRojstva = $(\"#kreirajDatumRojstva\").val();","if (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {","$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","} else {","$.ajaxSetup({","headers: {\"Ehr-Session\": sessionId}","});","$.ajax({","url: baseUrl + \"/ehr\",","type: 'POST',","success: function (data) {","var ehrId = data.ehrId;","var partyData = {","firstNames: ime,","lastNames: priimek,","dateOfBirth: datumRojstva,","partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]","};","$.ajax({","url: baseUrl + \"/demographics/party\",","type: 'POST',","contentType: 'application/json',","data: JSON.stringify(partyData),","success: function (party) {","if (party.action == 'CREATE') {","$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Uspešno kreiran EHR '\" + ehrId + \"'.</span>\");","console.log(\"Uspešno kreiran EHR '\" + ehrId + \"'.\");","$(\"#preberiEHRid\").val(ehrId);","}","},","error: function(err) {","$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","console.log(JSON.parse(err.responseText).userMessage);","}","});","}","});","}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]},{"start":{"row":29,"column":0},"end":{"row":29,"column":4},"action":"insert","lines":["    "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"insert","lines":["    "]},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"insert","lines":["    "]},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]},{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"insert","lines":["    "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"insert","lines":["    "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"insert","lines":["    "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"insert","lines":["    "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":4},"action":"insert","lines":["    "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["    "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":4},"action":"insert","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"insert","lines":["    "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":4},"action":"insert","lines":["    "]},{"start":{"row":66,"column":0},"end":{"row":66,"column":4},"action":"insert","lines":["    "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":4},"end":{"row":32,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"insert","lines":["    "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"insert","lines":["    "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":4},"action":"insert","lines":["    "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":4},"end":{"row":49,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":4},"end":{"row":50,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":4},"end":{"row":51,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":4},"end":{"row":52,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":4},"end":{"row":53,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["    "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":4},"action":"insert","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["    "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":4},"action":"insert","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"insert","lines":["    "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"insert","lines":["    "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"insert","lines":["    "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"insert","lines":["    "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"insert","lines":["    "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":4},"action":"insert","lines":["    "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"insert","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"insert","lines":["    "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["    "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":4},"action":"insert","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"insert","lines":["    "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":4},"action":"insert","lines":["    "]},{"start":{"row":66,"column":0},"end":{"row":66,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":1},"end":{"row":69,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":0},"end":{"row":70,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":0},"end":{"row":121,"column":1},"action":"insert","lines":["function dodajMeritveVitalnihZnakov() {","sessionId = getSessionId();","var ehrId = $(\"#dodajVitalnoEHR\").val();","var datumInUra = $(\"#dodajVitalnoDatumInUra\").val();","var telesnaVisina = $(\"#dodajVitalnoTelesnaVisina\").val();","var telesnaTeza = $(\"#dodajVitalnoTelesnaTeza\").val();","var telesnaTemperatura = $(\"#dodajVitalnoTelesnaTemperatura\").val();","var sistolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakSistolicni\").val();","var diastolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakDiastolicni\").val();","var nasicenostKrviSKisikom = $(\"#dodajVitalnoNasicenostKrviSKisikom\").val();","var merilec = $(\"#dodajVitalnoMerilec\").val();","if (!ehrId || ehrId.trim().length == 0) {","$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","} else {","$.ajaxSetup({","headers: {\"Ehr-Session\": sessionId}","});","var podatki = {","// Preview Structure: https://rest.ehrscape.com/rest/v1/template/Vital%20Signs/example","\"ctx/language\": \"en\",","\"ctx/territory\": \"SI\",","\"ctx/time\": datumInUra,","\"vital_signs/height_length/any_event/body_height_length\": telesnaVisina,","\"vital_signs/body_weight/any_event/body_weight\": telesnaTeza,","\"vital_signs/body_temperature/any_event/temperature|magnitude\": telesnaTemperatura,","\"vital_signs/body_temperature/any_event/temperature|unit\": \"°C\",","\"vital_signs/blood_pressure/any_event/systolic\": sistolicniKrvniTlak,","\"vital_signs/blood_pressure/any_event/diastolic\": diastolicniKrvniTlak,","\"vital_signs/indirect_oximetry:0/spo2|numerator\": nasicenostKrviSKisikom","};","var parametriZahteve = {","\"ehrId\": ehrId,","templateId: 'Vital Signs',","format: 'FLAT',","committer: merilec","};","$.ajax({","url: baseUrl + \"/composition?\" + $.param(parametriZahteve),","type: 'POST',","contentType: 'application/json',","data: JSON.stringify(podatki),","success: function (res) {","console.log(res.meta.href);","$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>\" + res.meta.href + \".</span>\");","},","error: function(err) {","$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","console.log(JSON.parse(err.responseText).userMessage);","}","});","}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"insert","lines":["    "]},{"start":{"row":72,"column":0},"end":{"row":72,"column":4},"action":"insert","lines":["    "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":4},"action":"insert","lines":["    "]},{"start":{"row":74,"column":0},"end":{"row":74,"column":4},"action":"insert","lines":["    "]},{"start":{"row":75,"column":0},"end":{"row":75,"column":4},"action":"insert","lines":["    "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":4},"action":"insert","lines":["    "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":4},"action":"insert","lines":["    "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":4},"action":"insert","lines":["    "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"insert","lines":["    "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"insert","lines":["    "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"insert","lines":["    "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":4},"action":"insert","lines":["    "]},{"start":{"row":83,"column":0},"end":{"row":83,"column":4},"action":"insert","lines":["    "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":4},"action":"insert","lines":["    "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":4},"action":"insert","lines":["    "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":4},"action":"insert","lines":["    "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":4},"action":"insert","lines":["    "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":4},"action":"insert","lines":["    "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":4},"action":"insert","lines":["    "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":4},"action":"insert","lines":["    "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":4},"action":"insert","lines":["    "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":4},"action":"insert","lines":["    "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":4},"action":"insert","lines":["    "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":4},"action":"insert","lines":["    "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":4},"action":"insert","lines":["    "]},{"start":{"row":96,"column":0},"end":{"row":96,"column":4},"action":"insert","lines":["    "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":4},"action":"insert","lines":["    "]},{"start":{"row":98,"column":0},"end":{"row":98,"column":4},"action":"insert","lines":["    "]},{"start":{"row":99,"column":0},"end":{"row":99,"column":4},"action":"insert","lines":["    "]},{"start":{"row":100,"column":0},"end":{"row":100,"column":4},"action":"insert","lines":["    "]},{"start":{"row":101,"column":0},"end":{"row":101,"column":4},"action":"insert","lines":["    "]},{"start":{"row":102,"column":0},"end":{"row":102,"column":4},"action":"insert","lines":["    "]},{"start":{"row":103,"column":0},"end":{"row":103,"column":4},"action":"insert","lines":["    "]},{"start":{"row":104,"column":0},"end":{"row":104,"column":4},"action":"insert","lines":["    "]},{"start":{"row":105,"column":0},"end":{"row":105,"column":4},"action":"insert","lines":["    "]},{"start":{"row":106,"column":0},"end":{"row":106,"column":4},"action":"insert","lines":["    "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":4},"action":"insert","lines":["    "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":4},"action":"insert","lines":["    "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":4},"action":"insert","lines":["    "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":4},"action":"insert","lines":["    "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":4},"action":"insert","lines":["    "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":4},"action":"insert","lines":["    "]},{"start":{"row":113,"column":0},"end":{"row":113,"column":4},"action":"insert","lines":["    "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":4},"action":"insert","lines":["    "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":4},"action":"insert","lines":["    "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":0},"end":{"row":115,"column":4},"action":"insert","lines":["    "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":0},"end":{"row":113,"column":4},"action":"insert","lines":["    "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":107,"column":0},"end":{"row":107,"column":4},"action":"insert","lines":["    "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":4},"action":"insert","lines":["    "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":4},"action":"insert","lines":["    "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":4},"action":"insert","lines":["    "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":4},"action":"insert","lines":["    "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":106,"column":0},"end":{"row":106,"column":4},"action":"insert","lines":["    "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":4},"action":"insert","lines":["    "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":4},"action":"insert","lines":["    "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":4},"action":"insert","lines":["    "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":4},"action":"insert","lines":["    "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":4},"action":"insert","lines":["    "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":4},"action":"insert","lines":["    "]},{"start":{"row":113,"column":0},"end":{"row":113,"column":4},"action":"insert","lines":["    "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":4},"action":"insert","lines":["    "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":4},"action":"insert","lines":["    "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":0},"end":{"row":89,"column":4},"action":"insert","lines":["    "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":4},"action":"insert","lines":["    "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":4},"action":"insert","lines":["    "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":4},"action":"insert","lines":["    "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":4},"action":"insert","lines":["    "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":4},"action":"insert","lines":["    "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":4},"action":"insert","lines":["    "]},{"start":{"row":96,"column":0},"end":{"row":96,"column":4},"action":"insert","lines":["    "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":4},"action":"insert","lines":["    "]},{"start":{"row":98,"column":0},"end":{"row":98,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":85,"column":4},"end":{"row":85,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":84,"column":0},"end":{"row":84,"column":4},"action":"insert","lines":["    "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":4},"action":"insert","lines":["    "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":4},"action":"insert","lines":["    "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":4},"action":"insert","lines":["    "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":4},"action":"insert","lines":["    "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":4},"action":"insert","lines":["    "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":4},"action":"insert","lines":["    "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":4},"action":"insert","lines":["    "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":4},"action":"insert","lines":["    "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":4},"action":"insert","lines":["    "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":4},"action":"insert","lines":["    "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":4},"action":"insert","lines":["    "]},{"start":{"row":96,"column":0},"end":{"row":96,"column":4},"action":"insert","lines":["    "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":4},"action":"insert","lines":["    "]},{"start":{"row":98,"column":0},"end":{"row":98,"column":4},"action":"insert","lines":["    "]},{"start":{"row":99,"column":0},"end":{"row":99,"column":4},"action":"insert","lines":["    "]},{"start":{"row":100,"column":0},"end":{"row":100,"column":4},"action":"insert","lines":["    "]},{"start":{"row":101,"column":0},"end":{"row":101,"column":4},"action":"insert","lines":["    "]},{"start":{"row":102,"column":0},"end":{"row":102,"column":4},"action":"insert","lines":["    "]},{"start":{"row":103,"column":0},"end":{"row":103,"column":4},"action":"insert","lines":["    "]},{"start":{"row":104,"column":0},"end":{"row":104,"column":4},"action":"insert","lines":["    "]},{"start":{"row":105,"column":0},"end":{"row":105,"column":4},"action":"insert","lines":["    "]},{"start":{"row":106,"column":0},"end":{"row":106,"column":4},"action":"insert","lines":["    "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":4},"action":"insert","lines":["    "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":4},"action":"insert","lines":["    "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":4},"action":"insert","lines":["    "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":4},"action":"insert","lines":["    "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":4},"action":"insert","lines":["    "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":4},"action":"insert","lines":["    "]},{"start":{"row":113,"column":0},"end":{"row":113,"column":4},"action":"insert","lines":["    "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":4},"action":"insert","lines":["    "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":4},"action":"insert","lines":["    "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":82,"column":4},"end":{"row":82,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":24,"column":4},"action":"remove","lines":["$(document).ready(function() {","        $.ajax({","            url : \"clanek.txt\",","            dataType: \"text\",","            success : function (data) {","                $(\".text\").html(data);","            }","        });","}); "]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":1},"end":{"row":114,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":114,"column":0},"end":{"row":115,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":0},"end":{"row":116,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":0},"end":{"row":124,"column":4},"action":"insert","lines":["$(document).ready(function() {","        $.ajax({","            url : \"clanek.txt\",","            dataType: \"text\",","            success : function (data) {","                $(\".text\").html(data);","            }","        });","}); "]}]}],[{"group":"doc","deltas":[{"start":{"row":124,"column":4},"end":{"row":125,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":125,"column":0},"end":{"row":126,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":123,"column":11},"end":{"row":124,"column":0},"action":"insert","lines":["",""]},{"start":{"row":124,"column":0},"end":{"row":124,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":123,"column":11},"end":{"row":124,"column":0},"action":"insert","lines":["",""]},{"start":{"row":124,"column":0},"end":{"row":124,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":124,"column":8},"end":{"row":152,"column":4},"action":"insert","lines":["\t$('#preberiObstojeciEHR').change(function() {","\t\t$(\"#preberiSporocilo\").html(\"\");","\t\t$(\"#preberiEHRid\").val($(this).val());","\t});","\t$('#preberiPredlogoBolnika').change(function() {","\t\t$(\"#kreirajSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\",\");","\t\t$(\"#kreirajIme\").val(podatki[0]);","\t\t$(\"#kreirajPriimek\").val(podatki[1]);","\t\t$(\"#kreirajDatumRojstva\").val(podatki[2]);","\t});","\t$('#preberiObstojeciVitalniZnak').change(function() {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\"|\");","\t\t$(\"#dodajVitalnoEHR\").val(podatki[0]);","\t\t$(\"#dodajVitalnoDatumInUra\").val(podatki[1]);","\t\t$(\"#dodajVitalnoTelesnaVisina\").val(podatki[2]);","\t\t$(\"#dodajVitalnoTelesnaTeza\").val(podatki[3]);","\t\t$(\"#dodajVitalnoTelesnaTemperatura\").val(podatki[4]);","\t\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(podatki[5]);","\t\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(podatki[6]);","\t\t$(\"#dodajVitalnoNasicenostKrviSKisikom\").val(podatki[7]);","\t\t$(\"#dodajVitalnoMerilec\").val(podatki[8]);","\t});","\t$('#preberiEhrIdZaVitalneZnake').change(function() {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"\");","\t\t$(\"#meritveVitalnihZnakovEHRid\").val($(this).val());","\t});"]}]}],[{"group":"doc","deltas":[{"start":{"row":124,"column":4},"end":{"row":124,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":156,"column":0},"action":"remove","lines":["","var baseUrl = 'https://rest.ehrscape.com/rest/v1';","var queryUrl = baseUrl + '/query';","var username = \"ois.seminar\";","var password = \"ois4fri\";","","function getSessionId() {","    var response = $.ajax({","    type: \"POST\",","    url: baseUrl + \"/session?username=\" + encodeURIComponent(username) +","    \"&password=\" + encodeURIComponent(password),","    async: false","    });","    return response.responseJSON.sessionId;","}","","","","function kreirajEHRzaBolnika() {","    sessionId = getSessionId();","    var ime = $(\"#kreirajIme\").val();","    var priimek = $(\"#kreirajPriimek\").val();","    var datumRojstva = $(\"#kreirajDatumRojstva\").val();","    if (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {","        $(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","    } else {","            $.ajaxSetup({","            headers: {\"Ehr-Session\": sessionId}","        });","        $.ajax({","            url: baseUrl + \"/ehr\",","            type: 'POST',","            success: function (data) {","                var ehrId = data.ehrId;","                var partyData = {","                firstNames: ime,","                lastNames: priimek,","                dateOfBirth: datumRojstva,","                partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]","        };","            $.ajax({","                    url: baseUrl + \"/demographics/party\",","                    type: 'POST',","                    contentType: 'application/json',","                    data: JSON.stringify(partyData),","                    success: function (party) {","                        if (party.action == 'CREATE') {","                            $(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Uspešno kreiran EHR '\" + ehrId + \"'.</span>\");","                            console.log(\"Uspešno kreiran EHR '\" + ehrId + \"'.\");","                            $(\"#preberiEHRid\").val(ehrId);","                }","                    },","                    error: function(err) {","                        $(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","                        console.log(JSON.parse(err.responseText).userMessage);","                }","                });","            }","        });","    }","}","","function dodajMeritveVitalnihZnakov() {","    sessionId = getSessionId();","    var ehrId = $(\"#dodajVitalnoEHR\").val();","    var datumInUra = $(\"#dodajVitalnoDatumInUra\").val();","    var telesnaVisina = $(\"#dodajVitalnoTelesnaVisina\").val();","    var telesnaTeza = $(\"#dodajVitalnoTelesnaTeza\").val();","    var telesnaTemperatura = $(\"#dodajVitalnoTelesnaTemperatura\").val();","    var sistolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakSistolicni\").val();","    var diastolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakDiastolicni\").val();","    var nasicenostKrviSKisikom = $(\"#dodajVitalnoNasicenostKrviSKisikom\").val();","    var merilec = $(\"#dodajVitalnoMerilec\").val();","    if (!ehrId || ehrId.trim().length == 0) {","        $(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","    } else {","        $.ajaxSetup({","            headers: {\"Ehr-Session\": sessionId}","        });","        var podatki = {","        // Preview Structure: https://rest.ehrscape.com/rest/v1/template/Vital%20Signs/example","            \"ctx/language\": \"en\",","            \"ctx/territory\": \"SI\",","            \"ctx/time\": datumInUra,","            \"vital_signs/height_length/any_event/body_height_length\": telesnaVisina,","            \"vital_signs/body_weight/any_event/body_weight\": telesnaTeza,","            \"vital_signs/body_temperature/any_event/temperature|magnitude\": telesnaTemperatura,","            \"vital_signs/body_temperature/any_event/temperature|unit\": \"°C\",","            \"vital_signs/blood_pressure/any_event/systolic\": sistolicniKrvniTlak,","            \"vital_signs/blood_pressure/any_event/diastolic\": diastolicniKrvniTlak,","            \"vital_signs/indirect_oximetry:0/spo2|numerator\": nasicenostKrviSKisikom","        };","        var parametriZahteve = {","        \"ehrId\": ehrId,","        templateId: 'Vital Signs',","        format: 'FLAT',","        committer: merilec","        };","            $.ajax({","                url: baseUrl + \"/composition?\" + $.param(parametriZahteve),","                type: 'POST',","                contentType: 'application/json',","                data: JSON.stringify(podatki),","                success: function (res) {","                console.log(res.meta.href);","                $(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>\" + res.meta.href + \".</span>\");","                },","                error: function(err) {","                    $(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","                    console.log(JSON.parse(err.responseText).userMessage);","                }","            });","    }","}","","","$(document).ready(function() {","        $.ajax({","            url : \"clanek.txt\",","            dataType: \"text\",","            success : function (data) {","                $(\".text\").html(data);","            }","        });","\t$('#preberiObstojeciEHR').change(function() {","\t\t$(\"#preberiSporocilo\").html(\"\");","\t\t$(\"#preberiEHRid\").val($(this).val());","\t});","\t$('#preberiPredlogoBolnika').change(function() {","\t\t$(\"#kreirajSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\",\");","\t\t$(\"#kreirajIme\").val(podatki[0]);","\t\t$(\"#kreirajPriimek\").val(podatki[1]);","\t\t$(\"#kreirajDatumRojstva\").val(podatki[2]);","\t});","\t$('#preberiObstojeciVitalniZnak').change(function() {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\"|\");","\t\t$(\"#dodajVitalnoEHR\").val(podatki[0]);","\t\t$(\"#dodajVitalnoDatumInUra\").val(podatki[1]);","\t\t$(\"#dodajVitalnoTelesnaVisina\").val(podatki[2]);","\t\t$(\"#dodajVitalnoTelesnaTeza\").val(podatki[3]);","\t\t$(\"#dodajVitalnoTelesnaTemperatura\").val(podatki[4]);","\t\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(podatki[5]);","\t\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(podatki[6]);","\t\t$(\"#dodajVitalnoNasicenostKrviSKisikom\").val(podatki[7]);","\t\t$(\"#dodajVitalnoMerilec\").val(podatki[8]);","\t});","\t$('#preberiEhrIdZaVitalneZnake').change(function() {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"\");","\t\t$(\"#meritveVitalnihZnakovEHRid\").val($(this).val());","\t});","        ","}); ","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":282,"column":3},"action":"insert","lines":["","var baseUrl = 'https://rest.ehrscape.com/rest/v1';","var queryUrl = baseUrl + '/query';","","var username = \"ois.seminar\";","var password = \"ois4fri\";","","function getSessionId() {","    var response = $.ajax({","        type: \"POST\",","        url: baseUrl + \"/session?username=\" + encodeURIComponent(username) +","                \"&password=\" + encodeURIComponent(password),","        async: false","    });","    return response.responseJSON.sessionId;","}","","","function kreirajEHRzaBolnika() {","\tsessionId = getSessionId();","","\tvar ime = $(\"#kreirajIme\").val();","\tvar priimek = $(\"#kreirajPriimek\").val();","\tvar datumRojstva = $(\"#kreirajDatumRojstva\").val();","","\tif (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {","\t\t$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","\t} else {","\t\t$.ajaxSetup({","\t\t    headers: {\"Ehr-Session\": sessionId}","\t\t});","\t\t$.ajax({","\t\t    url: baseUrl + \"/ehr\",","\t\t    type: 'POST',","\t\t    success: function (data) {","\t\t        var ehrId = data.ehrId;","\t\t        var partyData = {","\t\t            firstNames: ime,","\t\t            lastNames: priimek,","\t\t            dateOfBirth: datumRojstva,","\t\t            partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]","\t\t        };","\t\t        $.ajax({","\t\t            url: baseUrl + \"/demographics/party\",","\t\t            type: 'POST',","\t\t            contentType: 'application/json',","\t\t            data: JSON.stringify(partyData),","\t\t            success: function (party) {","\t\t                if (party.action == 'CREATE') {","\t\t                    $(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Uspešno kreiran EHR '\" + ehrId + \"'.</span>\");","\t\t                    console.log(\"Uspešno kreiran EHR '\" + ehrId + \"'.\");","\t\t                    $(\"#preberiEHRid\").val(ehrId);","\t\t                }","\t\t            },","\t\t            error: function(err) {","\t\t            \t$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t            \tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t            }","\t\t        });","\t\t    }","\t\t});","\t}","}","","","function preberiEHRodBolnika() {","\tsessionId = getSessionId();","","\tvar ehrId = $(\"#preberiEHRid\").val();","","\tif (!ehrId || ehrId.trim().length == 0) {","\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");","\t} else {","\t\t$.ajax({","\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",","\t\t\ttype: 'GET',","\t\t\theaders: {\"Ehr-Session\": sessionId},","\t    \tsuccess: function (data) {","\t\t\t\tvar party = data.party;","\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Bolnik '\" + party.firstNames + \" \" + party.lastNames + \"', ki se je rodil '\" + party.dateOfBirth + \"'.</span>\");","\t\t\t\tconsole.log(\"Bolnik '\" + party.firstNames + \" \" + party.lastNames + \"', ki se je rodil '\" + party.dateOfBirth + \"'.\");","\t\t\t},","\t\t\terror: function(err) {","\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t}","\t\t});","\t}\t","}","","","function dodajMeritveVitalnihZnakov() {","\tsessionId = getSessionId();","","\tvar ehrId = $(\"#dodajVitalnoEHR\").val();","\tvar datumInUra = $(\"#dodajVitalnoDatumInUra\").val();","\tvar telesnaVisina = $(\"#dodajVitalnoTelesnaVisina\").val();","\tvar telesnaTeza = $(\"#dodajVitalnoTelesnaTeza\").val();","\tvar telesnaTemperatura = $(\"#dodajVitalnoTelesnaTemperatura\").val();","\tvar sistolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakSistolicni\").val();","\tvar diastolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakDiastolicni\").val();","\tvar nasicenostKrviSKisikom = $(\"#dodajVitalnoNasicenostKrviSKisikom\").val();","\tvar merilec = $(\"#dodajVitalnoMerilec\").val();","","\tif (!ehrId || ehrId.trim().length == 0) {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","\t} else {","\t\t$.ajaxSetup({","\t\t    headers: {\"Ehr-Session\": sessionId}","\t\t});","\t\tvar podatki = {","\t\t\t// Preview Structure: https://rest.ehrscape.com/rest/v1/template/Vital%20Signs/example","\t\t    \"ctx/language\": \"en\",","\t\t    \"ctx/territory\": \"SI\",","\t\t    \"ctx/time\": datumInUra,","\t\t    \"vital_signs/height_length/any_event/body_height_length\": telesnaVisina,","\t\t    \"vital_signs/body_weight/any_event/body_weight\": telesnaTeza,","\t\t   \t\"vital_signs/body_temperature/any_event/temperature|magnitude\": telesnaTemperatura,","\t\t    \"vital_signs/body_temperature/any_event/temperature|unit\": \"°C\",","\t\t    \"vital_signs/blood_pressure/any_event/systolic\": sistolicniKrvniTlak,","\t\t    \"vital_signs/blood_pressure/any_event/diastolic\": diastolicniKrvniTlak,","\t\t    \"vital_signs/indirect_oximetry:0/spo2|numerator\": nasicenostKrviSKisikom","\t\t};","\t\tvar parametriZahteve = {","\t\t    \"ehrId\": ehrId,","\t\t    templateId: 'Vital Signs',","\t\t    format: 'FLAT',","\t\t    committer: merilec","\t\t};","\t\t$.ajax({","\t\t    url: baseUrl + \"/composition?\" + $.param(parametriZahteve),","\t\t    type: 'POST',","\t\t    contentType: 'application/json',","\t\t    data: JSON.stringify(podatki),","\t\t    success: function (res) {","\t\t    \tconsole.log(res.meta.href);","\t\t        $(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>\" + res.meta.href + \".</span>\");","\t\t    },","\t\t    error: function(err) {","\t\t    \t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t    }","\t\t});","\t}","}","","","function preberiMeritveVitalnihZnakov() {","\tsessionId = getSessionId();\t","","\tvar ehrId = $(\"#meritveVitalnihZnakovEHRid\").val();","\tvar tip = $(\"#preberiTipZaVitalneZnake\").val();","","\tif (!ehrId || ehrId.trim().length == 0 || !tip || tip.trim().length == 0) {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");","\t} else {","\t\t$.ajax({","\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",","\t    \ttype: 'GET',","\t    \theaders: {\"Ehr-Session\": sessionId},","\t    \tsuccess: function (data) {","\t\t\t\tvar party = data.party;","\t\t\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"<br/><span>Pridobivanje podatkov za <b>'\" + tip + \"'</b> bolnika <b>'\" + party.firstNames + \" \" + party.lastNames + \"'</b>.</span><br/><br/>\");","\t\t\t\tif (tip == \"telesna temperatura\") {","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/view/\" + ehrId + \"/\" + \"body_temperature\",","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tif (res.length > 0) {","\t\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna temperatura</th></tr>\";","\t\t\t\t\t\t        for (var i in res) {","\t\t\t\t\t\t            results += \"<tr><td>\" + res[i].time + \"</td><td class='text-right'>\" + res[i].temperature + \" \" \t+ res[i].unit + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t\t\t} else if (tip == \"telesna teža\") {","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/view/\" + ehrId + \"/\" + \"weight\",","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tif (res.length > 0) {","\t\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna teža</th></tr>\";","\t\t\t\t\t\t        for (var i in res) {","\t\t\t\t\t\t            results += \"<tr><td>\" + res[i].time + \"</td><td class='text-right'>\" + res[i].weight + \" \" \t+ res[i].unit + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});\t\t\t\t\t","\t\t\t\t} else if (tip == \"telesna temperatura AQL\") {","\t\t\t\t\tvar AQL = ","\t\t\t\t\t\t\"select \" +","    \t\t\t\t\t\t\"t/data[at0002]/events[at0003]/time/value as cas, \" +","    \t\t\t\t\t\t\"t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as temperatura_vrednost, \" +","    \t\t\t\t\t\t\"t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/units as temperatura_enota \" +","\t\t\t\t\t\t\"from EHR e[e/ehr_id/value='\" + ehrId + \"'] \" +","\t\t\t\t\t\t\"contains OBSERVATION t[openEHR-EHR-OBSERVATION.body_temperature.v1] \" +","\t\t\t\t\t\t\"where t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude<35 \" +","\t\t\t\t\t\t\"order by t/data[at0002]/events[at0003]/time/value desc \" +","\t\t\t\t\t\t\"limit 10\";","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/query?\" + $.param({\"aql\": AQL}),","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna temperatura</th></tr>\";","\t\t\t\t\t    \tif (res) {","\t\t\t\t\t    \t\tvar rows = res.resultSet;","\t\t\t\t\t\t        for (var i in rows) {","\t\t\t\t\t\t            results += \"<tr><td>\" + rows[i].cas + \"</td><td class='text-right'>\" + rows[i].temperatura_vrednost + \" \" \t+ rows[i].temperatura_enota + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t\t\t}","\t    \t},","\t    \terror: function(err) {","\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t    \t}","\t\t});","\t}","}","","","$(document).ready(function() {","\t$('#preberiObstojeciEHR').change(function() {","\t\t$(\"#preberiSporocilo\").html(\"\");","\t\t$(\"#preberiEHRid\").val($(this).val());","\t});","\t$('#preberiPredlogoBolnika').change(function() {","\t\t$(\"#kreirajSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\",\");","\t\t$(\"#kreirajIme\").val(podatki[0]);","\t\t$(\"#kreirajPriimek\").val(podatki[1]);","\t\t$(\"#kreirajDatumRojstva\").val(podatki[2]);","\t});","\t$('#preberiObstojeciVitalniZnak').change(function() {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\"|\");","\t\t$(\"#dodajVitalnoEHR\").val(podatki[0]);","\t\t$(\"#dodajVitalnoDatumInUra\").val(podatki[1]);","\t\t$(\"#dodajVitalnoTelesnaVisina\").val(podatki[2]);","\t\t$(\"#dodajVitalnoTelesnaTeza\").val(podatki[3]);","\t\t$(\"#dodajVitalnoTelesnaTemperatura\").val(podatki[4]);","\t\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(podatki[5]);","\t\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(podatki[6]);","\t\t$(\"#dodajVitalnoNasicenostKrviSKisikom\").val(podatki[7]);","\t\t$(\"#dodajVitalnoMerilec\").val(podatki[8]);","\t});","\t$('#preberiEhrIdZaVitalneZnake').change(function() {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"\");","\t\t$(\"#meritveVitalnihZnakovEHRid\").val($(this).val());","\t});","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":252,"column":30},"end":{"row":253,"column":0},"action":"insert","lines":["",""]},{"start":{"row":253,"column":0},"end":{"row":253,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":253,"column":4},"end":{"row":259,"column":11},"action":"insert","lines":["        $.ajax({","            url : \"clanek.txt\",","            dataType: \"text\",","            success : function (data) {","                $(\".text\").html(data);","            }","        });"]}]}],[{"group":"doc","deltas":[{"start":{"row":253,"column":8},"end":{"row":253,"column":12},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":253,"column":4},"end":{"row":253,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":253,"column":0},"end":{"row":253,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":253,"column":0},"end":{"row":253,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":132},"end":{"row":26,"column":0},"action":"insert","lines":["",""]},{"start":{"row":26,"column":0},"end":{"row":26,"column":5},"action":"insert","lines":["\t    "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":5},"end":{"row":26,"column":6},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":6},"end":{"row":26,"column":7},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":5},"end":{"row":26,"column":7},"action":"remove","lines":["co"]},{"start":{"row":26,"column":5},"end":{"row":26,"column":12},"action":"insert","lines":["console"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":12},"end":{"row":26,"column":13},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":13},"end":{"row":26,"column":14},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":13},"end":{"row":26,"column":14},"action":"remove","lines":["l"]},{"start":{"row":26,"column":13},"end":{"row":26,"column":18},"action":"insert","lines":["log()"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":17},"end":{"row":26,"column":19},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"insert","lines":["V"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":19},"end":{"row":26,"column":20},"action":"insert","lines":["N"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":20},"end":{"row":26,"column":21},"action":"insert","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":21},"end":{"row":26,"column":22},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":22},"end":{"row":26,"column":23},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":23},"end":{"row":26,"column":24},"action":"insert","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":24},"end":{"row":26,"column":25},"action":"insert","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":25},"end":{"row":26,"column":26},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":26},"end":{"row":26,"column":27},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":27},"end":{"row":26,"column":28},"action":"insert","lines":["O"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":28},"end":{"row":26,"column":29},"action":"insert","lines":["D"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"insert","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":31},"end":{"row":26,"column":32},"action":"insert","lines":["K"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":32},"end":{"row":26,"column":33},"action":"insert","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":35},"end":{"row":26,"column":36},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":0},"end":{"row":26,"column":36},"action":"remove","lines":["\t    console.log(\"VNESITE PODATKE\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":132},"end":{"row":26,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":20},"end":{"row":65,"column":21},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":19},"end":{"row":65,"column":20},"action":"remove","lines":["o"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":116,"column":7},"end":{"row":116,"column":67},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1418580085933,"hash":"a23350c366a1019be9c841bd217e067f2f049d2b"}